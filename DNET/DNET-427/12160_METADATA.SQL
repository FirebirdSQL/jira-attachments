/******************************************************************************/
/****         Generated by IBExpert 2007.05.03 25/05/2012 00:21:59         ****/
/******************************************************************************/

SET SQL DIALECT 3;

SET NAMES WIN1252;

CREATE DATABASE '127.0.0.1:X:\SourcePlusnet\WebStore2010Dev\zDatabase\TESTE.FDB'
USER 'SYSDBA' PASSWORD 'masterkey'
PAGE_SIZE 8192
DEFAULT CHARACTER SET WIN1252;



/******************************************************************************/
/****                                Tables                                ****/
/******************************************************************************/



CREATE TABLE PED (
    PED_ID           INTEGER NOT NULL,
    PED_DATA         DATE NOT NULL,
    PED_HORA         TIME NOT NULL,
    PED_ENDIP        VARCHAR(15) NOT NULL,
    PED_CLI_CPFCNPJ  VARCHAR(14) NOT NULL COLLATE WIN_PTBR,
    PED_CLI_NOME     VARCHAR(64) NOT NULL COLLATE WIN_PTBR
);


CREATE TABLE PEDPOS (
    PED_ID          INTEGER NOT NULL,
    PEDPOS_ID       SMALLINT NOT NULL,
    PEDPOS_POSICAO  VARCHAR(48) NOT NULL
);


INSERT INTO PED (PED_ID, PED_DATA, PED_HORA, PED_ENDIP, PED_CLI_CPFCNPJ, PED_CLI_NOME) VALUES (1, '2012-05-25', '06:00:00.000', '127.0.0.1', '01828845116', 'TESTE NOME');

COMMIT WORK;

INSERT INTO PEDPOS (PED_ID, PEDPOS_ID, PEDPOS_POSICAO) VALUES (1, 1, '1 - Aguardando processamento');
INSERT INTO PEDPOS (PED_ID, PEDPOS_ID, PEDPOS_POSICAO) VALUES (1, 2, '2 - Aprovado e em processamento');
INSERT INTO PEDPOS (PED_ID, PEDPOS_ID, PEDPOS_POSICAO) VALUES (1, 3, '3 - Faturado e encaminhado para entrega');

COMMIT WORK;



/******************************************************************************/
/****                             Primary Keys                             ****/
/******************************************************************************/

ALTER TABLE PED ADD CONSTRAINT PK_PED PRIMARY KEY (PED_ID);
ALTER TABLE PEDPOS ADD CONSTRAINT PK_PEDPOS PRIMARY KEY (PED_ID, PEDPOS_ID);


/******************************************************************************/
/****                             Foreign Keys                             ****/
/******************************************************************************/

ALTER TABLE PEDPOS ADD CONSTRAINT FK_PEDPOS_PED FOREIGN KEY (PED_ID) REFERENCES PED (PED_ID) ON DELETE CASCADE ON UPDATE CASCADE;


/******************************************************************************/
/****                             Descriptions                             ****/
/******************************************************************************/

DESCRIBE TABLE PED
'Pedido';

DESCRIBE TABLE PEDPOS
'Pedido - Posição';



/* Fields descriptions */

DESCRIBE FIELD PED_ID TABLE PED
'Identificador';

DESCRIBE FIELD PED_DATA TABLE PED
'Data';

DESCRIBE FIELD PED_HORA TABLE PED
'Hora';

DESCRIBE FIELD PED_ENDIP TABLE PED
'Endereço IP';

DESCRIBE FIELD PED_CLI_CPFCNPJ TABLE PED
'CPF/CNPJ';

DESCRIBE FIELD PED_CLI_NOME TABLE PED
'Nome/Nome Fantasia';

DESCRIBE FIELD PED_ID TABLE PEDPOS
'Pedido';

DESCRIBE FIELD PEDPOS_ID TABLE PEDPOS
'Identificador';

DESCRIBE FIELD PEDPOS_POSICAO TABLE PEDPOS
'Posição';

